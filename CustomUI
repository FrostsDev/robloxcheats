--[[
    FrostsHub Style 3 UI Library
    - Faithfully recreates the visual style from your provided image and code.
]]

local FrostsHub = {}
FrostsHub.__index = FrostsHub

local PlayerGui = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")

-- Main container for all created elements
local Elements = {}

-- Utility function for creating rounded corners
local function addCorner(instance)
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 4) -- A subtle rounding looks best
    corner.Parent = instance
end

function FrostsHub:Window(title)
    local self = setmetatable({}, FrostsHub)
    
    -- 1. Create the ScreenGui
    self.ScreenGui = Instance.new("ScreenGui")
    self.ScreenGui.Name = "FrostsHub_UI"
    self.ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    self.ScreenGui.Parent = PlayerGui
    table.insert(Elements, self.ScreenGui)

    -- 2. Create the Main Frame (Dark background)
    local MainFrame = Instance.new("Frame")
    MainFrame.Name = "MainFrame"
    MainFrame.Size = UDim2.new(0, 426, 0, 319)
    MainFrame.Position = UDim2.new(0.5, -213, 0.5, -160)
    MainFrame.BackgroundColor3 = Color3.fromRGB(27, 27, 27)
    MainFrame.BorderSizePixel = 0
    MainFrame.Parent = self.ScreenGui
    addCorner(MainFrame)

    -- 3. Create the Title Label
    local UiName = Instance.new("TextLabel", MainFrame)
    UiName.Name = "UiName"
    UiName.Size = UDim2.new(0, 200, 0, 50)
    UiName.Position = UDim2.new(0.3, 0, 0, 0)
    UiName.BackgroundTransparency = 1
    UiName.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Bold)
    UiName.Text = title or "FrostsHub Style 3"
    UiName.TextColor3 = Color3.fromRGB(255, 255, 255)
    UiName.TextSize = 16
    UiName.TextXAlignment = Enum.TextXAlignment.Left

    -- 4. Create the Divider Line
    local Divider = Instance.new("Frame")
    Divider.Name = "Divider"
    Divider.BackgroundColor3 = Color3.fromRGB(43, 43, 43)
    Divider.BorderSizePixel = 0
    Divider.Size = UDim2.new(1, 0, 0, 1)
    Divider.Position = UDim2.new(0, 0, 0, 50)
    Divider.Parent = MainFrame

    -- Container for tab buttons
    local TabsContainer = Instance.new("Frame", MainFrame)
    TabsContainer.Size = UDim2.new(1, 0, 0, 50)
    TabsContainer.BackgroundTransparency = 1
    local tabsListLayout = Instance.new("UIListLayout", TabsContainer)
    tabsListLayout.FillDirection = Enum.FillDirection.Horizontal
    tabsListLayout.Padding = UDim.new(0, 10)
    tabsListLayout.VerticalAlignment = Enum.VerticalAlignment.Center
    
    self.MainFrame = MainFrame
    self.TabsContainer = TabsContainer
    self.ActiveTabContent = nil
    
    return self
end

function FrostsHub:Tab(text)
    -- Create the content frame for this tab first
    local ContentFrame = Instance.new("Frame")
    ContentFrame.Name = "ContentFrame"
    ContentFrame.Size = UDim2.new(1, -20, 1, -70)
    ContentFrame.Position = UDim2.new(0.5, 0, 0, 60)
    ContentFrame.AnchorPoint = Vector2.new(0.5, 0)
    ContentFrame.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
    ContentFrame.BorderSizePixel = 0
    ContentFrame.Visible = false -- Hide by default
    ContentFrame.Parent = self.MainFrame
    addCorner(ContentFrame)
    
    local contentListLayout = Instance.new("UIListLayout", ContentFrame)
    contentListLayout.Padding = UDim.new(0, 10)
    contentListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
    contentListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    
    -- Create the Tab Button
    local TabButton = Instance.new("TextButton")
    TabButton.Name = text .. "Tab"
    TabButton.Size = UDim2.new(0, 105, 0, 37)
    TabButton.BackgroundColor3 = Color3.fromRGB(117, 52, 255)
    TabButton.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Bold)
    TabButton.Text = text
    TabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    TabButton.TextSize = 14
    TabButton.Parent = self.TabsContainer
    addCorner(TabButton)
    
    TabButton.MouseButton1Click:Connect(function()
        -- Hide all other content frames
        for _, child in ipairs(self.MainFrame:GetChildren()) do
            if child.Name == "ContentFrame" then
                child.Visible = false
            end
        end
        -- Show this tab's content
        ContentFrame.Visible = true
        self.ActiveTabContent = ContentFrame
    end)
    
    -- If this is the first tab, make it active
    if not self.ActiveTabContent then
        ContentFrame.Visible = true
        self.ActiveTabContent = ContentFrame
    end
    
    return ContentFrame -- Return the frame where elements will be placed
end

function FrostsHub:Button(parent, text, callback)
    local Button = Instance.new("TextButton")
    Button.Name = "Button"
    Button.Size = UDim2.new(1, -20, 0, 40)
    Button.BackgroundColor3 = Color3.fromRGB(117, 52, 255)
    Button.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Bold)
    Button.Text = text
    Button.TextColor3 = Color3.fromRGB(255, 255, 255)
    Button.TextSize = 14
    Button.Parent = parent
    addCorner(Button)
    
    if callback then
        Button.MouseButton1Click:Connect(callback)
    end
    return Button
end

function FrostsHub:Toggle(parent, text, callback)
    local toggled = false
    
    -- Main container for the toggle element
    local ToggleFrame = Instance.new("TextButton") -- Using a TextButton for the background makes it clickable
    ToggleFrame.Name = "Toggle"
    ToggleFrame.Size = UDim2.new(1, -20, 0, 30)
    ToggleFrame.BackgroundTransparency = 1
    ToggleFrame.Text = ""
    ToggleFrame.Parent = parent
    
    -- The small purple square indicator
    local Indicator = Instance.new("Frame", ToggleFrame)
    Indicator.Size = UDim2.new(0, 20, 0, 20)
    Indicator.Position = UDim2.new(0, 0, 0.5, 0)
    Indicator.AnchorPoint = Vector2.new(0, 0.5)
    Indicator.BackgroundColor3 = Color3.fromRGB(45, 45, 45) -- Off color
    addCorner(Indicator)
    
    -- The text label
    local Label = Instance.new("TextLabel", ToggleFrame)
    Label.Size = UDim2.new(1, -30, 1, 0)
    Label.Position = UDim2.new(0, 30, 0, 0)
    Label.BackgroundTransparency = 1
    Label.FontFace = Font.new("rbxasset://fonts/families/SourceSansPro.json", Enum.FontWeight.Normal)
    Label.Text = text
    Label.TextColor3 = Color3.fromRGB(255, 255, 255)
    Label.TextSize = 14
    Label.TextXAlignment = Enum.TextXAlignment.Left
    
    ToggleFrame.MouseButton1Click:Connect(function()
        toggled = not toggled
        if toggled then
            Indicator.BackgroundColor3 = Color3.fromRGB(117, 52, 255) -- On color
        else
            Indicator.BackgroundColor3 = Color3.fromRGB(45, 45, 45) -- Off color
        end
        if callback then
            callback(toggled)
        end
    end)
    return ToggleFrame
end

-- Function to destroy the UI if needed
function FrostsHub:Destroy()
    for _, obj in pairs(Elements) do
        obj:Destroy()
    end
    Elements = {}
end

return FrostsHub
